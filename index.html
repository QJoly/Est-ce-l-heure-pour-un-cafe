<!doctype html>
<html lang="fr">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Est-ce l'heure pour un café ?</title>
    <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css"
    />
    <link rel="stylesheet" href="style.css">

    <meta name="description" content="Est-ce l'heure pour un café ?">

    <script defer>

        document.addEventListener('DOMContentLoaded', function() {
            isItTime();
            getQuote();
        });

        function isItTime() {
            const d = new Date();
            let hour = d.getHours();
            if (hour > 5 && hour < 18) {
                document.querySelector('#answer').innerText = 'Va faire un café ☕';
            } else if (hour < 5) {
                document.querySelector('#answer').innerText = 'Trop tôt pour un café';
            } else if (hour > 18) {
                document.querySelector('#answer').innerText = 'Jamais trop tard pour un café ☕';                
            }
            blinkTitle();
        }

        function blinkTitle() {
            const title = document.querySelector('title');
            title.innerText = '☕ Café ? ☕';
            // Add and remove the title every 1 second
            setInterval(() => {
                title.innerText = title.innerText === '☕ Café ? ☕' ? 'Est-ce l\'heure pour un café ?' : '☕ Café ? ☕';
            }, 2000);

        }

        function getQuote(){
            fetch('quotes.txt')
                .then(response => response.text())
                .then(text => {
                    const quotes = text.split('\n');
                    const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
                    console.log(randomQuote);
                    document.querySelector('#quote').innerText = randomQuote;
                });
        }

    </script>
</head>

<body>
    <main>
        <h1 id="answer">Non !</h1>

        <i id="quote"></i>
    </main>
</body>

</html>